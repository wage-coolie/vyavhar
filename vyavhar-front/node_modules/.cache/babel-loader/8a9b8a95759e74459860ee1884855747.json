{"ast":null,"code":"import _asyncToGenerator from\"/media/utkarsh/Utkarsh/Utkarsh/Utkarsh's docs/My work/JS/MERN/vyavhar/vyavhar-front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/media/utkarsh/Utkarsh/Utkarsh/Utkarsh's docs/My work/JS/MERN/vyavhar/vyavhar-front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/media/utkarsh/Utkarsh/Utkarsh/Utkarsh's docs/My work/JS/MERN/vyavhar/vyavhar-front/node_modules/@babel/runtime/regenerator/index.js\";import{React,useEffect,useState,useContext}from'react';import axios from'axios';import'./rightbar.css';import{Users}from'../../dummy_data';import Online from'../online/Online';import{Link}from'react-router-dom';import{Add,Remove}from\"@material-ui/icons\";import{AuthContext}from\"../../context/AuthContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Rightbar(_ref){var user=_ref.user;var PF=process.env.REACT_APP_PUBLIC_FOLDER;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),friends=_useState2[0],setFriends=_useState2[1];var _useContext=useContext(AuthContext),currentUser=_useContext.user,dispatch=_useContext.dispatch;var _useState3=useState(currentUser.following.includes(user===null||user===void 0?void 0:user.id)),_useState4=_slicedToArray(_useState3,2),followed=_useState4[0],setFollowed=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),usersall=_useState6[0],setUsersall=_useState6[1];var handleClick=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;if(!followed){_context.next=7;break;}_context.next=4;return axios.put(\"/users/\".concat(user._id,\"/unfollow\"),{userId:currentUser._id});case 4:dispatch({type:\"UNFOLLOW\",payload:user._id});_context.next=10;break;case 7:_context.next=9;return axios.put(\"/users/\".concat(user._id,\"/follow\"),{userId:currentUser._id});case 9:dispatch({type:\"FOLLOW\",payload:user._id});case 10:setFollowed(!followed);_context.next=15;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](0);case 15:case\"end\":return _context.stop();}}},_callee,null,[[0,13]]);}));return function handleClick(){return _ref2.apply(this,arguments);};}();useEffect(function(){var getallusers=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var allusers;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get('/users/all');case 3:allusers=_context2.sent;setUsersall(allusers.data);_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function getallusers(){return _ref3.apply(this,arguments);};}();getallusers();console.log(usersall);},[]);useEffect(function(){var getFriends=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var friendlist;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.get('/users/friends/'+currentUser._id);case 3:friendlist=_context3.sent;setFriends(friendlist.data);_context3.next=10;break;case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 10:case\"end\":return _context3.stop();}}},_callee3,null,[[0,7]]);}));return function getFriends(){return _ref4.apply(this,arguments);};}();getFriends();console.log(friends);},[currentUser]);var HomeRightBar=function HomeRightBar(){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"birthdayContainer\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"assets/Birthday.png\",alt:\"\",className:\"birthdayImg\"}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Utkarsh\"}),\" and \",/*#__PURE__*/_jsx(\"b\",{children:\"3\"}),\" other friends have birthdays today\"]})]}),/*#__PURE__*/_jsx(\"img\",{src:\"assets/nature.jpg\",alt:\"advertisement\",className:\"rightbarAd\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"rightbarTitle\",children:\"All Users\"}),\" \",usersall.map(function(u){return/*#__PURE__*/_jsx(Online,{user:u},u.id);})]});};var ProfileRightBar=function ProfileRightBar(){return/*#__PURE__*/_jsxs(_Fragment,{children:[user.username!==currentUser.username&&/*#__PURE__*/_jsxs(\"button\",{className:\"rightbarFollowButton\",onClick:handleClick,children:[followed?\"Unfollow\":\"Follow\",followed?/*#__PURE__*/_jsx(Remove,{}):/*#__PURE__*/_jsx(Add,{})]}),/*#__PURE__*/_jsx(\"h4\",{className:\"rightbarTitle\",children:/*#__PURE__*/_jsx(\"b\",{children:\"User information\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"rightbarInfo\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rightbarInfoItem\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"rightbarInfoKey\",children:\"City:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"rightbarInfoValue\",children:user.city})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rightbarInfoItem\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"rightbarInfoKey\",children:\"From:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"rightbarInfoValue\",children:user.from})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rightbarInfoItem\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"rightbarInfoKey\",children:\"Relationship:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"rightbarInfoValue\",children:function(){switch(currentUser.relationship){case 1:return\"Single\";case 2:return\"In relationship\";case 3:return\"Married\";default:return\"We don't know!!\";}}()})]})]}),/*#__PURE__*/_jsx(\"h4\",{className:\"rightbarTitle\",children:/*#__PURE__*/_jsx(\"b\",{children:\"User friends\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"rightbarFollowings\",children:friends.map(function(friend){return/*#__PURE__*/_jsx(Link,{to:\"/profile/\"+friend.username,children:/*#__PURE__*/_jsxs(\"div\",{className:\"rightbarFollowing\",children:[/*#__PURE__*/_jsx(\"img\",{src:friend.profilePicture?PF+friend.profilePicture:PF+'no_avatar/image_proxy.jpeg',alt:\"\",className:\"rightbarFollowingImg\"}),/*#__PURE__*/_jsx(\"span\",{className:\"rightbarFollowingName\",children:friend.username})]})});})})]});};return/*#__PURE__*/_jsx(\"div\",{className:\"rightbar\",children:/*#__PURE__*/_jsx(\"div\",{className:\"rightbarWrapper\",children:user?/*#__PURE__*/_jsx(ProfileRightBar,{}):/*#__PURE__*/_jsx(HomeRightBar,{})})});}","map":{"version":3,"sources":["/media/utkarsh/Utkarsh/Utkarsh/Utkarsh's docs/My work/JS/MERN/vyavhar/vyavhar-front/src/components/rightbar/Rightbar.jsx"],"names":["React","useEffect","useState","useContext","axios","Users","Online","Link","Add","Remove","AuthContext","Rightbar","user","PF","process","env","REACT_APP_PUBLIC_FOLDER","friends","setFriends","currentUser","dispatch","following","includes","id","followed","setFollowed","usersall","setUsersall","handleClick","put","_id","userId","type","payload","getallusers","get","allusers","data","console","log","getFriends","friendlist","HomeRightBar","map","u","ProfileRightBar","username","city","from","relationship","friend","profilePicture"],"mappings":"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","sourcesContent":["import {React,useEffect,useState,useContext} from 'react'\nimport axios from 'axios'\nimport './rightbar.css'\nimport { Users } from '../../dummy_data' \nimport Online from '../online/Online'\nimport {Link} from 'react-router-dom'\nimport { Add, Remove } from \"@material-ui/icons\";\n\nimport { AuthContext } from \"../../context/AuthContext\";\n\nexport default function Rightbar({ user }) {\n  const PF = process.env.REACT_APP_PUBLIC_FOLDER;\n  const [friends,setFriends] = useState([])\n  const { user: currentUser,dispatch} = useContext(AuthContext);\n\n  const [followed, setFollowed] = useState(\n    currentUser.following.includes(user?.id)\n  );\n  const [usersall,setUsersall] = useState([]);\n\nconst handleClick = async () => {\n    try {\n      if (followed) {\n        await axios.put(`/users/${user._id}/unfollow`, {\n          userId: currentUser._id,\n        });\n        dispatch({ type: \"UNFOLLOW\", payload: user._id });\n      } else {\n        await axios.put(`/users/${user._id}/follow`, {\n          userId: currentUser._id,\n        });\n        dispatch({ type: \"FOLLOW\", payload: user._id });\n      }\n      setFollowed(!followed);\n    } catch (err) {\n    }\n  };\n\n    useEffect(() => {\n        const getallusers = async () => {\n            try {\n                const allusers = await axios.get('/users/all')\n                setUsersall(allusers.data)\n            } catch (e) {\n                console.log(e)\n            }\n        }\n        getallusers();\n        console.log(usersall)\n    }, []);\n\n\n  useEffect(() => {\n    const getFriends = async () => {\n      try{\n        const friendlist = await axios.get('/users/friends/'+currentUser._id)\n        setFriends(friendlist.data)\n    }catch(e){\n      console.log(e)\n    }\n    }\n    getFriends();\n    console.log(friends)\n    }, [currentUser]);\n\n  const HomeRightBar = () => {\n      return ( \n        <>\n          <div className='birthdayContainer'>\n          <img src=\"assets/Birthday.png\" alt=\"\" className='birthdayImg' />\n          <span><b>Utkarsh</b> and <b>3</b> other friends have birthdays today</span>\n        </div>\n\n\n          <img src = \"assets/nature.jpg\"\n          alt = 'advertisement'\n          className = 'rightbarAd' />\n          <h4 className='rightbarTitle'>All Users</h4> {\n              usersall.map(u => (\n                  <Online key = {u.id} user = {u}/>\n              ))\n          } \n          </>\n      )\n  }\n  const ProfileRightBar = () => {\n    return (\n      <>\n      {user.username !== currentUser.username && (\n          <button className=\"rightbarFollowButton\" onClick={handleClick}>\n            {followed ? \"Unfollow\" : \"Follow\"}\n            {followed ? <Remove /> : <Add />}\n          </button>\n        )}\n       <h4 className=\"rightbarTitle\"><b>User information</b></h4>\n        <div className=\"rightbarInfo\">\n          <div className=\"rightbarInfoItem\">\n            <span className=\"rightbarInfoKey\">City:</span>\n            <span className=\"rightbarInfoValue\">{user.city}</span>\n          </div>\n          <div className=\"rightbarInfoItem\">\n            <span className=\"rightbarInfoKey\">From:</span>\n            <span className=\"rightbarInfoValue\">{user.from}</span>\n          </div>\n          <div className=\"rightbarInfoItem\">\n            <span className=\"rightbarInfoKey\">Relationship:</span>\n            <span className=\"rightbarInfoValue\">\n             {(() => {\n                switch (currentUser.relationship) {\n          case 1 :   return \"Single\";\n          case 2: return \"In relationship\";\n          case 3:  return \"Married\";\n          default:      return \"We don't know!!\";\n        }\n      })()}\n            </span>\n          </div>\n        </div>\n        <h4 className=\"rightbarTitle\"><b>User friends</b></h4>\n        <div className=\"rightbarFollowings\">\n          {friends.map((friend) => (\n            <Link to={\"/profile/\"+friend.username}>\n            <div className=\"rightbarFollowing\">\n            <img\n              src={friend.profilePicture? PF+friend.profilePicture : PF+'no_avatar/image_proxy.jpeg'}\n              alt=\"\"\n              className=\"rightbarFollowingImg\"\n            />\n            <span className=\"rightbarFollowingName\">{friend.username}</span>\n          </div>\n          </Link>\n            )\n          )}\n          \n          \n        </div>\n      </>\n      )\n  }\n\n  return (\n    <div className='rightbar'>\n      <div className='rightbarWrapper'>\n        {user ? <ProfileRightBar/>:<HomeRightBar/>}\n      </div>\n          \n    </div>\n\n    )\n}"]},"metadata":{},"sourceType":"module"}