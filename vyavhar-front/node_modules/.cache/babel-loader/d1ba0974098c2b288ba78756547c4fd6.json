{"ast":null,"code":"import _asyncToGenerator from\"/media/utkarsh/Utkarsh/Utkarsh/Utkarsh's docs/My work/JS/MERN/vyavhar/vyavhar-front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/media/utkarsh/Utkarsh/Utkarsh/Utkarsh's docs/My work/JS/MERN/vyavhar/vyavhar-front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/media/utkarsh/Utkarsh/Utkarsh/Utkarsh's docs/My work/JS/MERN/vyavhar/vyavhar-front/node_modules/@babel/runtime/regenerator/index.js\";import{React,useContext,useRef,useState}from'react';import'./share.css';import{PermMedia,Label,Room,EmojiEmotions}from\"@material-ui/icons\";import{AuthContext}from\"../../context/AuthContext\";import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Share(){var _useContext=useContext(AuthContext),user=_useContext.user;var PF=process.env.REACT_APP_PUBLIC_FOLDER;var desc=useRef();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),file=_useState2[0],setFile=_useState2[1];var submitHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var post,fileName,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();post={userId:user._id,desc:desc.current.value};if(!file){_context.next=16;break;}fileName=Date.now()+file.name;data=new FormData();data.append(\"name\",fileName);data.append(\"file\",file);post.img=fileName;// console.log(newPost);\n_context.prev=8;_context.next=11;return axios.post(\"/upload\",data);case 11:_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](8);console.log(_context.t0);case 16:_context.prev=16;_context.next=19;return axios.post('/posts',post);case 19:window.location.reload();_context.next=25;break;case 22:_context.prev=22;_context.t1=_context[\"catch\"](16);console.log(_context.t1);case 25:case\"end\":return _context.stop();}}},_callee,null,[[8,13],[16,22]]);}));return function submitHandler(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"share\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"shareWrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"shareTop\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"shareProfileImg\",src:user.profilePicture?PF+user.profilePicture:PF+\"no_avatar/image_proxy.jpeg\",alt:\"\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"What's in your mind \"+user.username+\"?\",className:\"shareInput\",ref:desc})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"shareHr\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"shareBottom\",onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"shareOptions\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"file\",className:\"shareOption\",children:[/*#__PURE__*/_jsx(PermMedia,{htmlColor:\"tomato\",className:\"shareIcon\"}),/*#__PURE__*/_jsx(\"span\",{className:\"shareOptionText\",children:\"Photo or Video\"}),/*#__PURE__*/_jsx(\"input\",{style:{display:\"none\"},type:\"file\",id:\"file\",acceptable:\".png,.jpeg,.jpg\",onChange:function onChange(e){return setFile(e.target.files[0]);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"shareOption\",children:[/*#__PURE__*/_jsx(Label,{htmlColor:\"blue\",className:\"shareIcon\"}),/*#__PURE__*/_jsx(\"span\",{className:\"shareOptionText\",children:\"Tag\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"shareOption\",children:[/*#__PURE__*/_jsx(Room,{htmlColor:\"green\",className:\"shareIcon\"}),/*#__PURE__*/_jsx(\"span\",{className:\"shareOptionText\",children:\"Location\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"shareOption\",children:[/*#__PURE__*/_jsx(EmojiEmotions,{htmlColor:\"goldenrod\",className:\"shareIcon\"}),/*#__PURE__*/_jsx(\"span\",{className:\"shareOptionText\",children:\"Feelings\"})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"shareButton\",children:\"Share\"})]})]})});}","map":{"version":3,"sources":["/media/utkarsh/Utkarsh/Utkarsh/Utkarsh's docs/My work/JS/MERN/vyavhar/vyavhar-front/src/components/share/Share.jsx"],"names":["React","useContext","useRef","useState","PermMedia","Label","Room","EmojiEmotions","AuthContext","axios","Share","user","PF","process","env","REACT_APP_PUBLIC_FOLDER","desc","file","setFile","submitHandler","e","preventDefault","post","userId","_id","current","value","fileName","Date","now","name","data","FormData","append","img","console","log","window","location","reload","profilePicture","username","display","target","files"],"mappings":"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","sourcesContent":["import {React , useContext,useRef,useState} from 'react'\nimport './share.css'\nimport {PermMedia, Label,Room, EmojiEmotions} from \"@material-ui/icons\"\nimport {AuthContext} from \"../../context/AuthContext\"\nimport axios from 'axios'\n\nexport default function Share() {\n    const {user} = useContext(AuthContext)\n    const PF = process.env.REACT_APP_PUBLIC_FOLDER\n    const desc = useRef()\n    const [file,setFile] = useState(null)\n    const submitHandler = async (e) => {\n        e.preventDefault();\n        const post = {\n            userId:user._id,\n            desc:desc.current.value\n        };\n        if (file) {\n            const fileName = Date.now() + file.name;\n            const data = new FormData();\n            data.append(\"name\", fileName);\n            data.append(\"file\", file);\n            post.img = fileName;\n            // console.log(newPost);\n            try{\n                await axios.post(\"/upload\",data)\n            }catch(e){\n                console.log(e)\n            }\n            }\n        try{\n            await axios.post('/posts',post)\n            window.location.reload()\n        }catch(e){\n            console.log(e)\n        }\n    }\n\treturn (\n\t\t <div className=\"share\">\n      <div className=\"shareWrapper\">\n        <div className=\"shareTop\">\n          <img className=\"shareProfileImg\" src={user.profilePicture ? PF+user.profilePicture : PF+\"no_avatar/image_proxy.jpeg\"} alt=\"\" />\n          <input\n            placeholder={\"What's in your mind \"+ user.username+\"?\"}\n            className=\"shareInput\"\n            ref={desc}\n          />\n        </div>\n        <hr className=\"shareHr\"/>\n        <form className=\"shareBottom\" onSubmit={submitHandler} >\n            <div className=\"shareOptions\">\n                <label htmlFor=\"file\" className=\"shareOption\">\n                    <PermMedia htmlColor=\"tomato\" className=\"shareIcon\"/>\n                    <span className=\"shareOptionText\">Photo or Video</span>\n                    <input style={{display:\"none\"}}  type=\"file\" id=\"file\" acceptable=\".png,.jpeg,.jpg\" onChange={(e) =>setFile(e.target.files[0])} />\n                </label>\n                <div className=\"shareOption\">\n                    <Label htmlColor=\"blue\" className=\"shareIcon\"/>\n                    <span className=\"shareOptionText\">Tag</span>\n                </div>\n                <div className=\"shareOption\">\n                    <Room htmlColor=\"green\" className=\"shareIcon\"/>\n                    <span className=\"shareOptionText\">Location</span>\n                </div>\n                <div className=\"shareOption\">\n                    <EmojiEmotions htmlColor=\"goldenrod\" className=\"shareIcon\"/>\n                    <span className=\"shareOptionText\">Feelings</span>\n                </div>\n            </div>\n            <button type=\"submit\" className=\"shareButton\">Share</button>\n        </form>\n      </div>\n    </div>\n\t)\n}"]},"metadata":{},"sourceType":"module"}